<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tron Light Cycles</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            overflow: hidden;
            font-family: 'Courier New', monospace;
        }
        
        #gameCanvas {
            display: block;
            margin: 0 auto;
            background: #000;
            border: 2px solid #00ffff;
            box-shadow: 0 0 20px #00ffff;
        }
        
        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #00ffff;
            font-size: 20px;
            text-shadow: 0 0 10px #00ffff;
            z-index: 10;
        }
        
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ff0000;
            font-size: 48px;
            text-align: center;
            display: none;
            text-shadow: 0 0 20px #ff0000;
            z-index: 20;
        }
        
        #instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #00ffff;
            font-size: 16px;
            text-align: center;
            text-shadow: 0 0 10px #00ffff;
            z-index: 10;
        }
        
        .button {
            background: transparent;
            border: 2px solid #00ffff;
            color: #00ffff;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            margin: 10px;
            text-shadow: 0 0 10px #00ffff;
            box-shadow: 0 0 10px #00ffff;
            font-family: 'Courier New', monospace;
        }
        
        .button:hover {
            background: #00ffff;
            color: #000;
        }
    </style>
</head>
<body>
    <div id="ui">
        <div>Player 1 (Blue): <span id="score1">0</span></div>
        <div>Player 2 (Red): <span id="score2">0</span></div>
    </div>
    
    <canvas id="gameCanvas"></canvas>
    
    <div id="gameOver">
        <div id="winnerText"></div>
        <button class="button" onclick="resetGame()">Play Again</button>
    </div>
    
    <div id="instructions">
        Player 1: WASD | Player 2: Arrow Keys | Space: Pause | F: Fullscreen
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas size
        canvas.width = 800;
        canvas.height = 600;
        
        // Prevent arrow keys, space, and other game keys from scrolling
        window.addEventListener('keydown', function(e) {
            // Prevent default for arrow keys, space, and WASD
            if(['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' ', 'Space'].indexOf(e.key) > -1 ||
               ['w', 'a', 's', 'd', 'W', 'A', 'S', 'D'].indexOf(e.key) > -1) {
                e.preventDefault();
            }
        }, false);
        
        // Fullscreen Manager
        class FullscreenManager {
            constructor() {
                this.isFullscreen = false;
                this.setupFullscreenListeners();
            }
            
            setupFullscreenListeners() {
                // Listen for fullscreen change events
                document.addEventListener('fullscreenchange', () => this.updateState());
                document.addEventListener('webkitfullscreenchange', () => this.updateState());
                document.addEventListener('mozfullscreenchange', () => this.updateState());
                document.addEventListener('MSFullscreenChange', () => this.updateState());
            }
            
            updateState() {
                this.isFullscreen = !!(document.fullscreenElement || 
                                      document.webkitFullscreenElement || 
                                      document.mozFullScreenElement ||
                                      document.msFullscreenElement);
            }
            
            toggle() {
                if (this.isFullscreen) {
                    this.exit();
                } else {
                    this.enter();
                }
            }
            
            enter() {
                const elem = document.documentElement;
                
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) { // Safari
                    elem.webkitRequestFullscreen();
                } else if (elem.mozRequestFullScreen) { // Firefox
                    elem.mozRequestFullScreen();
                } else if (elem.msRequestFullscreen) { // IE/Edge
                    elem.msRequestFullscreen();
                }
            }
            
            exit() {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { // Safari
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) { // Firefox
                    document.mozCancelFullScreen();
                } else if (document.msExitFullscreen) { // IE/Edge
                    document.msExitFullscreen();
                }
            }
        }
        
        const fullscreenManager = new FullscreenManager();
        
        // Game variables
        const gridSize = 10;
        let gameRunning = true;
        let gamePaused = false;
        
        // Player 1 (Blue)
        let player1 = {
            x: 100,
            y: 300,
            dx: gridSize,
            dy: 0,
            trail: [],
            color: '#00ffff',
            score: 0
        };
        
        // Player 2 (Red)
        let player2 = {
            x: 700,
            y: 300,
            dx: -gridSize,
            dy: 0,
            trail: [],
            color: '#ff0000',
            score: 0
        };
        
        // Initialize trails
        player1.trail.push({x: player1.x, y: player1.y});
        player2.trail.push({x: player2.x, y: player2.y});
        
        // Keyboard controls
        document.addEventListener('keydown', function(e) {
            // Player 1 controls (WASD)
            if (e.key === 'w' || e.key === 'W') {
                if (player1.dy === 0) {
                    player1.dx = 0;
                    player1.dy = -gridSize;
                }
            }
            if (e.key === 's' || e.key === 'S') {
                if (player1.dy === 0) {
                    player1.dx = 0;
                    player1.dy = gridSize;
                }
            }
            if (e.key === 'a' || e.key === 'A') {
                if (player1.dx === 0) {
                    player1.dx = -gridSize;
                    player1.dy = 0;
                }
            }
            if (e.key === 'd' || e.key === 'D') {
                if (player1.dx === 0) {
                    player1.dx = gridSize;
                    player1.dy = 0;
                }
            }
            
            // Player 2 controls (Arrow keys)
            if (e.key === 'ArrowUp') {
                if (player2.dy === 0) {
                    player2.dx = 0;
                    player2.dy = -gridSize;
                }
            }
            if (e.key === 'ArrowDown') {
                if (player2.dy === 0) {
                    player2.dx = 0;
                    player2.dy = gridSize;
                }
            }
            if (e.key === 'ArrowLeft') {
                if (player2.dx === 0) {
                    player2.dx = -gridSize;
                    player2.dy = 0;
                }
            }
            if (e.key === 'ArrowRight') {
                if (player2.dx === 0) {
                    player2.dx = gridSize;
                    player2.dy = 0;
                }
            }
            
            // Pause
            if (e.key === ' ') {
                gamePaused = !gamePaused;
            }
            
            // Fullscreen toggle with F key
            if (e.key === 'f' || e.key === 'F') {
                fullscreenManager.toggle();
            }
        });
        
        function checkCollision(player, opponent) {
            // Check wall collision
            if (player.x < 0 || player.x >= canvas.width || 
                player.y < 0 || player.y >= canvas.height) {
                return true;
            }
            
            // Check self collision
            for (let i = 0; i < player.trail.length - 1; i++) {
                if (player.x === player.trail[i].x && player.y === player.trail[i].y) {
                    return true;
                }
            }
            
            // Check collision with opponent trail
            for (let i = 0; i < opponent.trail.length; i++) {
                if (player.x === opponent.trail[i].x && player.y === opponent.trail[i].y) {
                    return true;
                }
            }
            
            return false;
        }
        
        function update() {
            if (!gameRunning || gamePaused) return;
            
            // Update positions
            player1.x += player1.dx;
            player1.y += player1.dy;
            player2.x += player2.dx;
            player2.y += player2.dy;
            
            // Add to trails
            player1.trail.push({x: player1.x, y: player1.y});
            player2.trail.push({x: player2.x, y: player2.y});
            
            // Check collisions
            let p1Collision = checkCollision(player1, player2);
            let p2Collision = checkCollision(player2, player1);
            
            if (p1Collision && p2Collision) {
                endGame("Draw!");
            } else if (p1Collision) {
                player2.score++;
                endGame("Player 2 Wins!");
            } else if (p2Collision) {
                player1.score++;
                endGame("Player 1 Wins!");
            }
        }
        
        function draw() {
            // Clear canvas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid effect
            ctx.strokeStyle = '#001a1a';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += gridSize) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }
            for (let i = 0; i < canvas.height; i += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(canvas.width, i);
                ctx.stroke();
            }
            
            // Draw player 1 trail
            ctx.strokeStyle = player1.color;
            ctx.lineWidth = 4;
            ctx.shadowBlur = 10;
            ctx.shadowColor = player1.color;
            ctx.beginPath();
            for (let i = 0; i < player1.trail.length; i++) {
                if (i === 0) {
                    ctx.moveTo(player1.trail[i].x, player1.trail[i].y);
                } else {
                    ctx.lineTo(player1.trail[i].x, player1.trail[i].y);
                }
            }
            ctx.stroke();
            
            // Draw player 2 trail
            ctx.strokeStyle = player2.color;
            ctx.shadowColor = player2.color;
            ctx.beginPath();
            for (let i = 0; i < player2.trail.length; i++) {
                if (i === 0) {
                    ctx.moveTo(player2.trail[i].x, player2.trail[i].y);
                } else {
                    ctx.lineTo(player2.trail[i].x, player2.trail[i].y);
                }
            }
            ctx.stroke();
            
            // Draw player heads
            ctx.shadowBlur = 20;
            ctx.fillStyle = player1.color;
            ctx.shadowColor = player1.color;
            ctx.fillRect(player1.x - 5, player1.y - 5, 10, 10);
            
            ctx.fillStyle = player2.color;
            ctx.shadowColor = player2.color;
            ctx.fillRect(player2.x - 5, player2.y - 5, 10, 10);
            
            // Reset shadow
            ctx.shadowBlur = 0;
            
            // Draw pause text
            if (gamePaused) {
                ctx.fillStyle = '#ffff00';
                ctx.font = '48px Courier New';
                ctx.textAlign = 'center';
                ctx.fillText('PAUSED', canvas.width / 2, canvas.height / 2);
            }
        }
        
        function endGame(message) {
            gameRunning = false;
            document.getElementById('winnerText').textContent = message;
            document.getElementById('gameOver').style.display = 'block';
            document.getElementById('score1').textContent = player1.score;
            document.getElementById('score2').textContent = player2.score;
        }
        
        function resetGame() {
            // Reset positions
            player1.x = 100;
            player1.y = 300;
            player1.dx = gridSize;
            player1.dy = 0;
            player1.trail = [{x: player1.x, y: player1.y}];
            
            player2.x = 700;
            player2.y = 300;
            player2.dx = -gridSize;
            player2.dy = 0;
            player2.trail = [{x: player2.x, y: player2.y}];
            
            gameRunning = true;
            gamePaused = false;
            document.getElementById('gameOver').style.display = 'none';
        }
        
        // Game loop
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
        
        // Start game
        setInterval(update, 100);
        gameLoop();
    </script>
</body>
</html>